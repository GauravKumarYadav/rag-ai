# =============================================================================
# RAG AI Chatbot - Environment Configuration Example
# =============================================================================
# Copy this file to .env and customize values as needed
# =============================================================================

# -----------------------------------------------------------------------------
# LLM Provider Settings
# -----------------------------------------------------------------------------
# Provider options: ollama, lmstudio, openai, custom
LLM__PROVIDER=lmstudio

# LMStudio settings (default local provider)
LLM__LMSTUDIO__BASE_URL=http://localhost:1234/v1
LLM__LMSTUDIO__MODEL=Qwen3-VL-30B-Instruct

# Ollama settings
LLM__OLLAMA__BASE_URL=http://localhost:11434
LLM__OLLAMA__MODEL=llama3.2:1b

# OpenAI settings (if using OpenAI)
LLM__OPENAI__BASE_URL=https://api.openai.com/v1
LLM__OPENAI__MODEL=gpt-4o-mini
LLM__OPENAI__API_KEY=

# Common LLM settings
LLM__TEMPERATURE=0.35
LLM__MAX_TOKENS=4096
LLM__TIMEOUT=60.0
LLM__CONTEXT_WINDOW=8000

# -----------------------------------------------------------------------------
# RAG / Vector Store Settings
# -----------------------------------------------------------------------------
RAG__PROVIDER=chromadb
RAG__CHROMA_DB_PATH=./data/chroma
RAG__EMBEDDING_MODEL=nomic-embed-text

# -----------------------------------------------------------------------------
# Small Model RAG Optimization Settings (NEW)
# -----------------------------------------------------------------------------
# Cross-encoder reranker for better retrieval quality
RAG__RERANKER_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2
RAG__RERANKER_ENABLED=true

# Retrieval settings
RAG__INITIAL_FETCH_K=30        # Fetch more candidates for reranking
RAG__RERANK_TOP_K=5            # Keep top K after reranking
RAG__MMR_LAMBDA=0.5            # MMR diversity (0=max diversity, 1=max relevance)

# Context budget (token limit for retrieved context)
RAG__CONTEXT_TOKEN_BUDGET=1000

# Evidence thresholds
RAG__MIN_CONFIDENCE_THRESHOLD=0.3  # Below this, add uncertainty disclaimer

# -----------------------------------------------------------------------------
# Session / Memory Settings
# -----------------------------------------------------------------------------
SESSION__MAX_TOKENS=2500
SESSION__MAX_MESSAGES=15

# Sliding window settings (small model optimization)
SESSION__SLIDING_WINDOW_TURNS=3      # Keep only last N turns in context
SESSION__EPISODIC_MEMORY_ENABLED=true  # Extract important decisions/facts
SESSION__RUNNING_SUMMARY_ENABLED=true  # Summarize older history

# -----------------------------------------------------------------------------
# Redis Settings
# -----------------------------------------------------------------------------
REDIS__URL=redis://localhost:6379
REDIS__SESSION_TTL=86400  # 24 hours
REDIS__CACHE_TTL=3600     # 1 hour

# -----------------------------------------------------------------------------
# MySQL Settings (Audit Logging)
# -----------------------------------------------------------------------------
MYSQL__HOST=localhost
MYSQL__PORT=3306
MYSQL__DATABASE=audit_logs
MYSQL__USER=root
MYSQL__PASSWORD=your_password_here
MYSQL__POOL_SIZE=5

# -----------------------------------------------------------------------------
# JWT Authentication Settings
# -----------------------------------------------------------------------------
JWT__SECRET_KEY=change-me-in-production-use-strong-secret
JWT__ALGORITHM=HS256
JWT__ACCESS_TOKEN_EXPIRE_MINUTES=30

# -----------------------------------------------------------------------------
# Server Settings
# -----------------------------------------------------------------------------
SERVER__HOST=0.0.0.0
SERVER__PORT=8000

# -----------------------------------------------------------------------------
# Logging Settings
# -----------------------------------------------------------------------------
LOGGING__LEVEL=INFO
LOGGING__LOG_DIR=./logs
LOGGING__JSON_FORMAT=true

# -----------------------------------------------------------------------------
# Evaluation Settings
# -----------------------------------------------------------------------------
EVALUATION__SCHEDULER_ENABLED=true

# -----------------------------------------------------------------------------
# Monitoring Settings
# -----------------------------------------------------------------------------
MONITORING__METRICS_ENABLED=true
